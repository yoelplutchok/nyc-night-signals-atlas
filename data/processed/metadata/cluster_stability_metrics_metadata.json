{
  "output_file": "/Users/yoelplutchok/Desktop/Sleep_ESI_NYC/data/processed/temporal/cluster_stability_metrics.csv",
  "run_id": "20251221_200718_7b88a5d0",
  "timestamp": "2025-12-21T20:08:25.314315+00:00",
  "inputs": {
    "raw_311": {
      "path": "/Users/yoelplutchok/Desktop/Sleep_ESI_NYC/data/raw/311_noise/raw_311_noise_2021_2023_20251217.csv",
      "hash": "a376336f9db4e14d7b464740ebfc3ba415627cf3cc3a25816c70e1767fcf1f2d"
    }
  },
  "config_digest": "1ea0a2ec40076591312a864424b7f9afbf78125c676e2b2d559a26a8d0d6bdba",
  "config": {
    "time_windows": {
      "primary": {
        "year_start": 2021,
        "year_end": 2023,
        "label": "2021-2023"
      },
      "sensitivity": {
        "year_start": 2022,
        "year_end": 2023,
        "label": "2022-2023 (pandemic distortion check)"
      },
      "exploratory_2019": {
        "year_start": 2019,
        "year_end": 2019,
        "label": "2019 (pre-pandemic baseline, complaints only)"
      }
    },
    "nighttime": {
      "primary": {
        "start_hour": 22,
        "end_hour": 7,
        "label": "22:00-07:00"
      },
      "sensitivity": {
        "start_hour": 23,
        "end_hour": 6,
        "label": "23:00-06:00"
      },
      "timezone": "America/New_York"
    },
    "warm_season": {
      "primary": {
        "months": [
          6,
          7,
          8
        ],
        "label": "Jun-Aug"
      },
      "sensitivity": {
        "months": [
          5,
          6,
          7,
          8,
          9
        ],
        "label": "May-Sep"
      }
    },
    "hot_night_thresholds": {
      "primary_c": 20.0,
      "sensitivity_c": 24.0,
      "percentile": 90
    },
    "spatial_join": {
      "max_distance_ft": 500,
      "projected_crs": "EPSG:2263",
      "geographic_crs": "EPSG:4326"
    },
    "bounds_checks": {
      "epsg_4326": {
        "lon_min": -75.0,
        "lon_max": -73.0,
        "lat_min": 40.0,
        "lat_max": 41.5
      },
      "epsg_2263": {
        "x_min": 900000,
        "x_max": 1100000,
        "y_min": 110000,
        "y_max": 280000
      }
    },
    "noise_311": {
      "complaint_types": [
        "Noise - Residential",
        "Noise - Street/Sidewalk",
        "Noise - Commercial",
        "Noise - Vehicle",
        "Noise - Park",
        "Noise",
        "Noise - Helicopter",
        "Noise - House of Worship"
      ],
      "subtypes": {
        "music": [
          "Loud Music/Party",
          "Loud Music"
        ],
        "construction": [
          "Construction",
          "Construction Before/After Hours"
        ],
        "traffic": [
          "Car/Truck Horn",
          "Car/Truck Music",
          "Engine Idling"
        ]
      }
    },
    "night_bins": {
      "bins": [
        {
          "name": "evening",
          "start": 22,
          "end": 24
        },
        {
          "name": "early_am",
          "start": 0,
          "end": 2
        },
        {
          "name": "core_night",
          "start": 2,
          "end": 4
        },
        {
          "name": "predawn",
          "start": 4,
          "end": 7
        }
      ],
      "late_night_hours": [
        1,
        2,
        3
      ]
    },
    "weekend": {
      "weekend_nights": [
        4,
        5
      ],
      "weekday_nights": [
        0,
        1,
        2,
        3,
        6
      ]
    },
    "raster": {
      "min_coverage": 0.5,
      "max_nodata_fraction": 0.3
    },
    "crosswalk": {
      "weight_tolerance": 0.01
    },
    "random_seeds": {
      "bootstrap": 42,
      "general": 2024,
      "clustering": 12345
    },
    "typology": {
      "k_range": [
        5,
        6,
        7,
        8,
        9
      ],
      "features": [
        "rate_per_1k_pop",
        "rate_per_km2",
        "share_noise___residential",
        "share_noise___street/sidewalk",
        "share_noise___commercial",
        "share_noise___vehicle",
        "share_noise___park",
        "share_noise",
        "share_noise___helicopter",
        "share_noise___house_of_worship",
        "share_evening",
        "share_early_am",
        "share_core_night",
        "share_predawn",
        "late_night_share",
        "weekend_uplift",
        "warm_season_ratio"
      ],
      "min_silhouette": 0.1,
      "min_cluster_size": 2,
      "cluster_labels": {
        "0": "Street-Dominated Activity",
        "1": "Weekend-Heavy Residential",
        "2": "Helicopter Corridor",
        "3": "Airport-Adjacent (Outlier)",
        "4": "Low-Intensity Baseline",
        "5": "Residential-Dominated Outlier",
        "6": "Evening Street Activity",
        "7": "Nightlife & Entertainment",
        "8": "Park-Influenced Outlier"
      },
      "outlier_clusters": [
        3,
        5,
        8
      ]
    },
    "nta_typology": {
      "k_range": [
        8,
        9,
        10,
        11,
        12,
        13,
        14,
        15
      ],
      "min_cluster_count": 200,
      "features": [
        "rate_per_1k_pop",
        "rate_per_km2",
        "share_noise___residential",
        "share_noise___street/sidewalk",
        "share_noise___commercial",
        "share_noise___vehicle",
        "share_noise___park",
        "share_noise",
        "share_noise___helicopter",
        "share_noise___house_of_worship",
        "share_evening",
        "share_early_am",
        "share_core_night",
        "share_predawn",
        "late_night_share",
        "weekend_uplift",
        "warm_season_ratio"
      ],
      "min_silhouette": 0.1,
      "min_cluster_size": 2,
      "singleton_control": {
        "max_singletons": 2,
        "max_singleton_fraction": 0.1
      }
    },
    "hotspots": {
      "cell_size_ft": 820,
      "hotspot_threshold": 10,
      "top_n_cells": 10,
      "top_n_citywide": 100
    },
    "hotspot_investigation": {
      "top_n_cells": 20,
      "latlon_decimals": 5,
      "flags": {
        "repeat_location_share_threshold": 0.9,
        "suspected_artifact_share_threshold": 0.95,
        "suspected_artifact_single_day_threshold": 200
      }
    },
    "hotspot_sensitivity": {
      "grid_sizes_ft": [
        410,
        820,
        1640
      ],
      "thresholds": [
        10,
        25,
        50
      ],
      "top_n_cells": 100,
      "primary_grid_size_ft": 820,
      "primary_threshold_analysis": 10,
      "primary_threshold_map": 50
    }
  },
  "git": {
    "commit": null,
    "dirty": null
  },
  "versions": {
    "python": "3.11.14",
    "geopandas": "1.1.1",
    "pandas": "2.3.3",
    "numpy": "2.3.5",
    "rasterio": "1.4.4",
    "pyproj": "3.7.2",
    "shapely": "2.1.2"
  },
  "extra": {
    "years_analyzed": [
      2021,
      2022,
      2023
    ],
    "cd_k": 9,
    "nta_k": 9,
    "min_cluster_count_year": 66,
    "random_seed": 12345,
    "cd_stability": [
      {
        "year_1": 2021,
        "year_2": 2022,
        "ari": 0.2952024248600539,
        "nmi": 0.5534846165357569,
        "n_common": 59,
        "level": "CD"
      },
      {
        "year_1": 2021,
        "year_2": 2023,
        "ari": 0.24223333746006748,
        "nmi": 0.511319686964686,
        "n_common": 59,
        "level": "CD"
      },
      {
        "year_1": 2022,
        "year_2": 2023,
        "ari": 0.252343368096481,
        "nmi": 0.5269555726675843,
        "n_common": 59,
        "level": "CD"
      }
    ],
    "nta_stability": [
      {
        "year_1": 2021,
        "year_2": 2022,
        "ari": 0.1994620561293319,
        "nmi": 0.31796947624259114,
        "n_common": 191,
        "level": "NTA"
      },
      {
        "year_1": 2021,
        "year_2": 2023,
        "ari": 0.23676103161721,
        "nmi": 0.3569167888509911,
        "n_common": 192,
        "level": "NTA"
      },
      {
        "year_1": 2022,
        "year_2": 2023,
        "ari": 0.17382992124228727,
        "nmi": 0.3409973176291736,
        "n_common": 193,
        "level": "NTA"
      }
    ],
    "n_stable_cds": 2,
    "n_stable_ntas": 5
  }
}